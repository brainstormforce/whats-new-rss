/**
 * === Whats New RSS ===
 *
 * Version: 1.0.2
 * Generated on: 7th February, 2024
 * Documentation: https://github.com/brainstormforce/whats-new-rss/blob/master/README.md
 */

var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(t,a,r,c){return new(r=r||Promise)(function(n,e){function s(t){try{o(c.next(t))}catch(t){e(t)}}function i(t){try{o(c.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(s,i)}o((c=c.apply(t,a||[])).next())})},__generator=this&&this.__generator||function(s,i){var o,a,r,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},l={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function t(n){return function(t){var e=[n,t];if(o)throw new TypeError("Generator is already executing.");for(;c=l&&e[l=0]?0:c;)try{if(o=1,a&&(r=2&e[0]?a.return:e[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,e[1])).done)return r;switch(a=0,(e=r?[2&e[0],r.value]:e)[0]){case 0:case 1:r=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,a=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(r=0<(r=c.trys).length&&r[r.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!r||e[1]>r[0]&&e[1]<r[3]))c.label=e[1];else if(6===e[0]&&c.label<r[1])c.label=r[1],r=e;else{if(!(r&&c.label<r[2])){r[2]&&c.ops.pop(),c.trys.pop();continue}c.label=r[2],c.ops.push(e)}}e=i.call(s,c)}catch(t){e=[6,t],a=0}finally{o=r=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},WhatsNewRSSDefaultArgs={rssFeedURL:"",selector:"",loaderIcon:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n\t<circle cx="50" cy="50" fill="none" stroke="#9f9f9f" stroke-width="10" r="35" stroke-dasharray="164.93361431346415 56.97787143782138">\n\t\t<animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform>\n\t</circle>\n\t</svg>',viewAll:{link:"",label:"View All"},triggerButton:{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.61703 13.1998C8.04294 13.1503 7.46192 13.125 6.875 13.125H6.25C4.17893 13.125 2.5 11.4461 2.5 9.375C2.5 7.30393 4.17893 5.625 6.25 5.625H6.875C7.46192 5.625 8.04294 5.59972 8.61703 5.55018M8.61703 13.1998C8.82774 14.0012 9.1031 14.7764 9.43719 15.5195C9.64341 15.9782 9.48685 16.5273 9.05134 16.7787L8.50441 17.0945C8.04492 17.3598 7.45466 17.1921 7.23201 16.7106C6.70983 15.5811 6.30451 14.3866 6.03155 13.1425M8.61703 13.1998C8.29598 11.9787 8.125 10.6968 8.125 9.375C8.125 8.05316 8.29598 6.77125 8.61703 5.55018M8.61703 13.1998C11.25 13.427 13.737 14.1643 15.9789 15.3124M8.61703 5.55018C11.25 5.323 13.737 4.58569 15.9789 3.43757M15.9789 3.43757C15.8808 3.12162 15.7751 2.80903 15.662 2.5M15.9789 3.43757C16.4247 4.87356 16.7131 6.37885 16.8238 7.93326M15.9789 15.3124C15.8808 15.6284 15.7751 15.941 15.662 16.25M15.9789 15.3124C16.4247 13.8764 16.7131 12.3711 16.8238 10.8167M16.8238 7.93326C17.237 8.2772 17.5 8.79539 17.5 9.375C17.5 9.95461 17.237 10.4728 16.8238 10.8167M16.8238 7.93326C16.8578 8.40942 16.875 8.8902 16.875 9.375C16.875 9.8598 16.8578 10.3406 16.8238 10.8167" stroke="#94A3B8" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',beforeBtn:"",afterBtn:"",className:"",onClick:function(){}},notification:{setLastPostUnixTime:null,getLastPostUnixTime:null},flyout:{title:"What's New?",excerpt:{wordLimit:500,moreSymbol:"&hellip;",readMore:{label:"Read More",className:""}},className:"",closeOnEsc:!0,closeOnOverlayClick:!0,closeBtnIcon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 18L18 6M6 6L18 18" stroke="#94A3B8" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',onOpen:function(){},onClose:function(){},onReady:function(){}}},WhatsNewRSS=function(){function t(t){this.lastPostUnixTime=0,this.notificationsCount=0,this.validateArgs(t),this.parseDefaults(t),this.setElement(),this.setID(),this.RSS_Fetch_Instance=new WhatsNewRSSFetch(this),this.RSS_View_Instance=new WhatsNewRSSView(this),this.setNotificationsCount(),this.setTriggers()}return t.prototype.validateArgs=function(e){["rssFeedURL","selector"].map(function(t){if(!e[t])throw new Error("".concat(t," is a required argument. It cannot be empty or undefined."))})},t.prototype.parseDefaults=function(t){this.args=__assign(__assign(__assign({},WhatsNewRSSDefaultArgs),t),{viewAll:__assign(__assign({},WhatsNewRSSDefaultArgs.viewAll),null==t?void 0:t.viewAll),triggerButton:__assign(__assign({},WhatsNewRSSDefaultArgs.triggerButton),null==t?void 0:t.triggerButton),flyout:__assign(__assign(__assign({},WhatsNewRSSDefaultArgs.flyout),null==t?void 0:t.flyout),{excerpt:__assign(__assign({},WhatsNewRSSDefaultArgs.flyout.excerpt),null==(t=null==t?void 0:t.flyout)?void 0:t.excerpt)})}),console.log(this.args)},t.prototype.getArgs=function(){return this.args},t.prototype.setElement=function(){this.element=document.querySelector(this.args.selector)},t.prototype.getElement=function(){return this.element},t.prototype.setID=function(){this.ID=btoa("".concat(this.getArgs().rssFeedURL,"-").concat(this.getArgs().selector)).replace(/=/g,"").slice(-12)},t.prototype.getID=function(){return this.ID},t.prototype.setNotificationsCount=function(){return __awaiter(this,void 0,void 0,function(){var e,n,s=this;return __generator(this,function(t){switch(t.label){case 0:return"function"!=typeof(e=this).getArgs().notification.getLastPostUnixTime?[3,2]:[4,this.getArgs().notification.getLastPostUnixTime(this)];case 1:return n=t.sent(),[3,3];case 2:n=+WhatsNewRSSCacheUtils.getLastPostUnixTime(),t.label=3;case 3:return e.lastPostUnixTime=n,this.RSS_Fetch_Instance.fetchData().then(function(t){t.length&&+t[0].date>s.lastPostUnixTime&&(t.forEach(function(t){t.date>s.lastPostUnixTime&&s.notificationsCount++}),s.RSS_View_Instance.setNotification(s.notificationsCount))}),[2]}})})},t.prototype.getNotificationsCount=function(){return this.notificationsCount},t.prototype.setTriggers=function(){function e(){s.classList.add("closed"),s.classList.remove("open"),s.classList.remove("ready"),document.body.classList.remove("whats-new-rss-is-active"),n.RSS_View_Instance.setNotification(!1),i.innerHTML="",n.getArgs().flyout.onClose(n),t.focus()}var n=this,t=document.getElementById(this.RSS_View_Instance.getTriggerButtonID()),s=document.getElementById(this.RSS_View_Instance.getFlyoutID()),i=s.querySelector(".whats-new-rss-flyout-inner-content"),o=document.getElementById(this.RSS_View_Instance.getFlyoutCloseBtnID());t.addEventListener("click",function(t){t.preventDefault(),n.getArgs().triggerButton.onClick(n),n.RSS_View_Instance.setIsLoading(!0),s.classList.remove("closed"),s.classList.add("open"),document.body.classList.add("whats-new-rss-is-active"),n.getArgs().flyout.onOpen(n),n.RSS_Fetch_Instance.fetchData().then(function(t){var e=+t[0].date;i.innerHTML="",t.forEach(function(t){var e=!!n.lastPostUnixTime&&t.date>n.lastPostUnixTime,t='\n\t\t\t\t\t\t<div class="rss-content-header">\n\t\t\t\t\t\t\t<p>'.concat(n.RSS_View_Instance.timeAgo(new Date(t.date)),'</p>\n\t\t\t\t\t\t\t<a href="').concat(t.postLink,'" target="_blank">\n\t\t\t\t\t\t\t\t<h2>').concat(t.title,"</h2>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t").concat(n.RSS_View_Instance.createExcerpt(t.description,t.postLink,n.getArgs().flyout.excerpt),"\n\t\t\t\t\t\t");i.innerHTML+=n.RSS_View_Instance.innerContentWrapper(t,e)}),n.getArgs().viewAll.link&&(i.innerHTML+=n.RSS_View_Instance.innerContentWrapper('\n\t\t\t\t\t\t\t<a href="'.concat(n.getArgs().viewAll.link,'" class="button view-all">').concat(n.getArgs().viewAll.label,"</a>\n\t\t\t\t\t\t\t"))),n.RSS_View_Instance.setIsLoading(!1),s.classList.add("ready"),n.getArgs().flyout.onReady(n),s.focus(),n.lastPostUnixTime=e,("function"==typeof n.getArgs().notification.setLastPostUnixTime?n.getArgs().notification:WhatsNewRSSCacheUtils).setLastPostUnixTime(e)})});this.getArgs().flyout.closeOnEsc&&document.addEventListener("keydown",function(t){"Escape"===t.key&&s.classList.contains("open")&&e()}),this.getArgs().flyout.closeOnOverlayClick&&s.querySelector(".whats-new-rss-flyout-overlay").addEventListener("click",e),o.addEventListener("click",e)},t}(),WhatsNewRSSCacheUtils=function(){function t(){}return t.setSessionData=function(t){return window.sessionStorage.setItem(this.keys.SESSION,t)},t.getSessionData=function(){return window.sessionStorage.getItem(this.keys.SESSION)},t.setLastPostUnixTime=function(t){return window.localStorage.setItem(this.keys.LAST_LATEST_POST,t.toString())},t.getLastPostUnixTime=function(){return+window.localStorage.getItem(this.keys.LAST_LATEST_POST)},t.keys={LAST_LATEST_POST:"whats-new-rss-last-lastest-post-unixtime",SESSION:"whats-new-rss-session-cache-response"},t}(),WhatsNewRSSFetch=function(){function t(t){this.rssFeedURL="",this.data=[],this.rssFeedURL=t.getArgs().rssFeedURL;t=JSON.parse(WhatsNewRSSCacheUtils.getSessionData());t&&t.length&&(this.data=t)}return t.prototype.fetchData=function(){return __awaiter(this,void 0,void 0,function(){var e,n,s,i=this;return __generator(this,function(t){switch(t.label){case 0:return this.data.length?[2,this.data]:(e=this,[4,fetch(this.rssFeedURL)]);case 1:return e.response=t.sent(),[4,this.response.text()];case 2:return n=t.sent(),(s=document.createElement("div")).innerHTML=n.replace(/<link>(.*?)<\/link>/g,'<a class="whats-new-rss-link">$1</a>').replace(/\s*]]>\s*/g,""),s.querySelectorAll("item").forEach(function(t){var e=t.querySelector("pubDate").innerHTML;i.data.push({title:t.querySelector("title").innerHTML,date:e?+new Date(e):null,postLink:t.querySelector(".whats-new-rss-link").innerHTML.trim(),description:t.querySelector("content\\:encoded").innerHTML})}),WhatsNewRSSCacheUtils.setSessionData(JSON.stringify(this.data)),[2,this.data]}})})},t}(),WhatsNewRSSView=function(){function t(t){this.RSS=t,this.createTriggerButton(),this.createFlyOut()}return t.prototype.getTriggerButtonID=function(){return"whats-new-rss-btn-".concat(this.RSS.getID())},t.prototype.getFlyoutID=function(){return"whats-new-rss-flyout-".concat(this.RSS.getID())},t.prototype.getFlyoutCloseBtnID=function(){return"whats-new-rss-flyout-close-".concat(this.RSS.getID())},t.prototype.setIsLoading=function(t){void 0===t&&(t=!1);var e=document.getElementById(this.getFlyoutID());t?e.classList.add("is-loading"):e.classList.remove("is-loading")},t.prototype.setNotification=function(t){var e=document.querySelector("#".concat(this.getTriggerButtonID()," .whats-new-rss-notification-badge"));t?(e.innerHTML=9<t?"9+":t.toString(),e.classList.remove("hide")):e.classList.add("hide")},t.prototype.createTriggerButton=function(){var t="\n\t\t".concat(this.RSS.getArgs().triggerButton.beforeBtn,'\n\t\t<a class="whats-new-rss-trigger-button" id="').concat(this.getTriggerButtonID(),'">\n\t\t\t').concat(this.RSS.getArgs().triggerButton.icon,'\n\t\t\t<div class="whats-new-rss-notification-badge hide">0</div>\n\t\t</a>\n\t\t').concat(this.RSS.getArgs().triggerButton.afterBtn,"\n\t\t");this.RSS.getElement().innerHTML+=t},t.prototype.createFlyOut=function(){var t=["whats-new-rss-flyout","closed"],e=(this.RSS.getArgs().flyout.className&&t.push(this.RSS.getArgs().flyout.className),document.createElement("div"));e.setAttribute("id",this.getFlyoutID()),e.setAttribute("class",t.join(" ")),e.setAttribute("role","dialog"),e.innerHTML='\n\t\t<div class="whats-new-rss-flyout-contents">\n\n\t\t\t<div class="whats-new-rss-flyout-inner-header">\n\n\t\t\t\t<div class="whats-new-rss-flyout-inner-header__title-icon-wrapper">\n\t\t\t\t\t<h3>'.concat(this.RSS.getArgs().flyout.title,'</h3>\n\n\t\t\t\t\t<span class="whats-new-rss-flyout-inner-header__loading-icon">\n\t\t\t\t\t').concat(this.RSS.getArgs().loaderIcon,'\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\n\t\t\t\t<button type="button" id="').concat(this.getFlyoutCloseBtnID(),'">').concat(this.RSS.getArgs().flyout.closeBtnIcon,'</button>\n\t\t\t</div>\n\n\t\t\t<div class="whats-new-rss-flyout-inner-content">\n\t\t\t\t<div class="skeleton-container">\n\t\t\t\t\t<div class="skeleton-row whats-new-rss-flyout-inner-content-item"></div>\n\t\t\t\t\t<div class="skeleton-row whats-new-rss-flyout-inner-content-item"></div>\n\t\t\t\t\t<div class="skeleton-row whats-new-rss-flyout-inner-content-item"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</div>\n\n\t\t<div class="whats-new-rss-flyout-overlay"></div>\n\t\t'),document.body.appendChild(e)},t.prototype.innerContentWrapper=function(t,e){var n=["whats-new-rss-flyout-inner-content-item"];return(e=void 0===e?!1:e)&&n.push("rss-new-post"),'\n\t\t<div class="'.concat(n.join(" "),'">\n\t\t\t').concat(e?'<small class="new-post-badge">New ✨</small>':"","\n\t\t\t").concat(t,"\n\t\t</div>\n\t\t")},t.prototype.createExcerpt=function(t,e,n){var s,i,o=n.wordLimit,a=n.moreSymbol,n=n.readMore;return!o||(i=(s=t.replace(/<[^>]*>/g,"").split(/\s+/)).slice(0,o).join(" "),a&&(i+=a),o>s.length)?t:e&&null!=n&&n.label?"<p>".concat(i,' <a href="').concat(e,'" target="_blank" class="').concat(n.className,'">').concat(n.label,"</a></p>"):"<p>".concat(i,"</p>")},t.prototype.timeAgo=function(t){var e,n=new Date,t=t.getTime(),n=n.getTime()-t,t=864e5;return n<6e4?"Just now":n<36e5?(e=Math.floor(n/6e4),"".concat(e," minute").concat(1<e?"s":""," ago")):n<t?(e=Math.floor(n/36e5),"".concat(e," hour").concat(1<e?"s":""," ago")):n<6048e5?(e=Math.floor(n/t),"".concat(e," day").concat(1<e?"s":""," ago")):n<2592e6?(t=Math.floor(n/6048e5),"".concat(t," week").concat(1<t?"s":""," ago")):(e=Math.floor(n/2592e6),"".concat(e," month").concat(1<e?"s":""," ago"))},t}();